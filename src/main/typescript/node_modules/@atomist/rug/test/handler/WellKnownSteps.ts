import { Given, Then, When } from "./Core";

// Register well-known steps

/**
 * Nothing.  Typical starting point for command handler testing.
 */
Given("nothing", (w) => { return; });

/**
 * Generic event handler registrtion.
 */
Given("([a-zA-Z0-9]+) handler", (world, handlerName) =>
    world.registerHandler(handlerName),
);

/**
 * No event handler was triggered.
 */
Then("no handler fired", (world) =>
    world.plan() === null,
);

/**
 * Invalid command handler parameters.
 */
Then("handler parameters were invalid", (world) =>
    world.invalidParameters() != null,
);

/**
 * The returned plan has no messages.
 */
Then("plan has no messages", (world) => {
    return world.plan().messages().length === 0;
});
